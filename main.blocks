<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable type="KIND_SpriteKind" id="VhMHe9oT!iKiHQm9*a+x">Player</variable><variable type="KIND_SpriteKind" id="wrMs4BlRn1/[@E@B?w.H">Projectile</variable><variable type="KIND_SpriteKind" id="fr^+reoChpVWPF-WDGF{">Food</variable><variable type="KIND_SpriteKind" id="Edn![3:xml9||gUlL6|M">Enemy</variable><variable id="_K,P?v.MZP$}dw.d_i:F">quantity</variable><variable id="3,qYMEk)X6zL8lA5r(zE">wood</variable><variable id="/^9!RNJrVGqNv=vb*L7h">total_cost</variable><variable id="I+,l_a#^-*JlAI5,$K4*">selection</variable><variable id="(z16wR`.`J3_G1Bu6B@s">WOOD_PER_CHICKEN</variable><variable id="F50cC0*lD8s@w,JFgCq_">WOOD_PER_KG_POTATO</variable><variable id="LwW8W/U]+A)*#.oC)I@C">WOOD_PER_GOAT</variable><variable id=",TQ^LvoNwq|1YNlnUQ[0">WOOD_PER_EGG</variable><variable id="u?D.C0bAz||BnxIr-xdF">WOOD_PER_HORSE</variable><variable id="g!VG34)QdV+rh^d^KZts">positions</variable><variable id="F+I{2q^ft](rRO*OBXT4">pos</variable><variable id="yE2jlYV0RYO|Z{0osZ`*">npc</variable><variable id=")8-fb%ERU_cE(jo~6LMr">npcs</variable><variable id=";TirE1yq(Bwwwbf..QhT">npc_to_talk</variable><variable id="M8cLz~fK@~{g~JUMy#Vq">trees</variable><variable id="q#nl;93Oun:.@Y-41:}1">MAX_TREES</variable><variable id="VSnw]:]kbhf-(yG6M^=Q">tree3</variable><variable id="@tw4.L:mvk:s$MLUjt6.">x2</variable><variable id="J?6YEozg}:DZxus]47;0">y2</variable><variable id="%eRJ!HcZr[dBC.9FX)lM">i</variable><variable id=";opjiGFA%ng@CCMSF^!:">mySprite</variable><variable id="~xGlV9n$5fP|.xRxjQfo">tree_to_chop</variable><variable id="!s`7y1,WNjXbhAD0IwPj">nena</variable><variable id="d;uAzIvT*TjcuJ]a`Vs@">TREE_SPAWN_TIME</variable><variable id="`WI[Gud(}zJ+L:DoAf-{">npc2</variable><variable id="WIKlDYF#$rg:GThluhRZ">overlapping</variable><variable id="fi!;mx5P:q@xo?hi:2}c">tree</variable><variable id="D{Mt.S1gQoU%#U[`N%qb">overlapping2</variable></variables><comment id="?jGXNud-;hkU9[8@9*}a" x="1783.234375" y="2272" w="170" h="120">
--- Variables ---
</comment><comment id="`*l)l0X~WGZ6cx-QiK?s" x="1998.234375" y="2272" w="480" h="120">
Variables for tree spawning (kept from your original code)
</comment><block type="pxt-on-start" id="^]v]QgUhqNDiUQcO[gGU" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="n.+pyQ14RAX`6Od:+GYT"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let wood = 0" numlines="1" declaredvars="wood"></mutation><next><block type="typescript_statement" id="b7j?G-xIRb/wUH|VhV}f"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let tree_to_chop : Sprite = null" numlines="1" declaredvars="tree_to_chop"></mutation><next><block type="typescript_statement" id="]4!^(-fl(e16wy~!mtz)"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let npc_to_talk : Sprite = null" numlines="1" declaredvars="npc_to_talk"></mutation><next><block type="variables_set" id="lFp}pl4w7x^Y/hHAOTsq"><field name="VAR" id="(z16wR`.`J3_G1Bu6B@s">WOOD_PER_CHICKEN</field><comment pinned="false" h="80" w="160">--- Constants and Conversion Rates ---
Wood required per unit of product</comment><value name="VALUE"><shadow type="math_number" id="l9L,yqB?|Pw.ii~*y$g9"><field name="NUM">6</field></shadow></value><next><block type="variables_set" id="PLL}9;2B(Qa=u;HIa[Dt"><field name="VAR" id="F50cC0*lD8s@w,JFgCq_">WOOD_PER_KG_POTATO</field><value name="VALUE"><shadow type="math_number" id="jH+?U1!h7U{0@djOK.zX"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="A+I.#O9kklX,~]oPW:E*"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="X`En#izTBGr3_K|eGK8k"><field name="NUM">2</field></shadow></value><value name="B"><shadow type="math_number" id="d[{,*x1.QB@CN]1Z0Nzo"><field name="NUM">1.5</field></shadow></value></block></value><next><block type="variables_set" id=".hai#30els3KW(EDPpC="><field name="VAR" id="LwW8W/U]+A)*#.oC)I@C">WOOD_PER_GOAT</field><value name="VALUE"><shadow type="math_number" id="1(-pj:PB5PFwsYDO,[u["><field name="NUM">5</field></shadow></value><next><block type="variables_set" id="NhSTv/w^9?@RuqV0op]U"><field name="VAR" id=",TQ^LvoNwq|1YNlnUQ[0">WOOD_PER_EGG</field><value name="VALUE"><shadow type="math_number" id="c9$KW)M;c7Y2G:[Ry;]q"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="]y+~Lfrr($d[c{4IsSy5"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="Y_%0xa[vL:`y@SoO@B;L"><field name="NUM">3</field></shadow></value><value name="B"><shadow type="math_number" id="]#A%mg7$a$q%S:(HzAXP"><field name="NUM">12</field></shadow></value></block></value><next><block type="variables_set" id="z~huRox)V$xfuVUYDxn]"><field name="VAR" id="u?D.C0bAz||BnxIr-xdF">WOOD_PER_HORSE</field><comment pinned="false" h="80" w="160">(3kg / 12 eggs)</comment><value name="VALUE"><shadow type="math_number" id="g%gm46GLZdE^c~X:B-;]"><field name="NUM">12</field></shadow></value><next><block type="typescript_statement" id="zCA@6WKm,eZbb1=MaoK!"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let NPC = SpriteKind.create()" numlines="1" declaredvars="NPC"></mutation><next><block type="variables_set" id="ef)]+q07}+[:#%uVHBS%"><field name="VAR" id="q#nl;93Oun:.@Y-41:}1">MAX_TREES</field><value name="VALUE"><shadow type="math_number" id="vm2E91VM,*3JiBH1ExJq"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id=",A;;2R)%*Zr]_(S8PTn}"><field name="VAR" id="d;uAzIvT*TjcuJ]a`Vs@">TREE_SPAWN_TIME</field><value name="VALUE"><shadow type="math_number" id="r^!{f#(xq2DMQEw0./^Q"><field name="NUM">10000</field></shadow></value><next><block type="set_current_tilemap" id="~Xb+o`IMSg]^.Cil]sz*"><comment pinned="false" h="80" w="160">--- Setup Scene ---</comment><value name="tilemap"><shadow type="tiles_tilemap_editor" id="-0t6+=i0Vyd)UUOs|-)X"><field name="tilemap">tilemap`nivel`</field><data>{"commentRefs":[],"fieldData":{"tilemap":"nivel1"}}</data></shadow></value><next><block type="variables_set" id="sN7e*s3c:V$@7*+e9|wk"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field><value name="VALUE"><shadow type="math_number" id="q+GQ+(TG]IQ4sr2eQr:T"><field name="NUM">0</field></shadow><block type="spritescreate" id="NZ}zsg6nNIMJ.a[Q0^UN"><value name="img"><shadow type="screen_image_picker" id="yD^FvL--*)F4[|+`M(_e"><field name="img">assets.image`nena-front`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image1"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="Wfs.=3g})P#rfi;82iWF"><field name="MEMBER">Player</field></shadow></value></block></value><next><block type="camerafollow" id=".E)g,19ViC%6zC*/n}T;"><value name="sprite"><block type="variables_get" id="r+IX4XkVC*2YPpV5zWRc"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><next><block type="game_control_sprite" id="3/Zdxj8ll!Yx1|[0i`7("><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id="pl56mI;-(6}PSO5T`sd#"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><next><block type="function_call" id="`1:B?:R1ej`.{NfY$=_3"><mutation name="spawn_npcs" functionid="s=}$6W/0y=nRxM`hP%2t"></mutation><comment pinned="false" h="80" w="160">Start NPC Spawning</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="gameinterval" id="@[tlGmdf,Z{mnmt?LRBf" x="579" y="20"><comment pinned="false" h="80" w="160">--- Game Loops ---</comment><value name="period"><shadow type="timePicker" id="C-7BIabSYZ1%qrLx$(k_"><field name="ms">500</field></shadow><block type="variables_get" id="sY@ajRg-6KDvR{C/03QD"><field name="VAR" id="d;uAzIvT*TjcuJ]a`Vs@">TREE_SPAWN_TIME</field></block></value><statement name="HANDLER"><block type="function_call" id="7*v%1MswnA6(~%aFbZA%"><mutation name="spawn_tree" functionid=".Yu29UdeL2%:gX~|jKt,"></mutation></block></statement></block><block type="gameupdate" id="jeJ*~,S,t,,mlYL-pg3?" x="1112" y="20"><statement name="HANDLER"><block type="pxt_controls_for_of" id="hlm*tr$si/CPNr8DIj`q"><value name="VAR"><block type="variables_get_reporter" id="P(Q[r#Ifqy]{cT?e=xl2"><mutation duplicateondrag="true"></mutation><field name="VAR" id="`WI[Gud(}zJ+L:DoAf-{">npc2</field></block></value><value name="LIST"><block type="variables_get" id="{Tz]}h/a=+zTM5+5WnHf"><field name="VAR" id=")8-fb%ERU_cE(jo~6LMr">npcs</field></block></value><statement name="DO"><block type="controls_if" id="|yRASl!H:`?7aIEP@30K"><value name="IF0"><shadow type="logic_boolean" id=":jryyFJ[EPF=t-2egJII"><field name="BOOL">TRUE</field></shadow><block type="spriteoverlapswith" id="Jj7vN17?iv[|tIeDX||F"><value name="sprite"><block type="variables_get" id="3y}DVdINl7*HtC@Nn4*/"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><value name="other"><block type="variables_get" id="E0?^Y3G(i%`-RHp.aD0:"><field name="VAR" id="`WI[Gud(}zJ+L:DoAf-{">npc2</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="QQdnJ*kg%1`H`*lDI{dB"><field name="VAR" id=";TirE1yq(Bwwwbf..QhT">npc_to_talk</field><value name="VALUE"><shadow type="math_number" id="mNfpZRqqLAwJ`837:Bt+"><field name="NUM">0</field></shadow><block type="variables_get" id="!NZp`%*x?$-lu?SR%g-W"><field name="VAR" id="`WI[Gud(}zJ+L:DoAf-{">npc2</field></block></value><next><block type="variables_set" id=",2a=o~`6@l-ak=il%(g%"><field name="VAR" id="WIKlDYF#$rg:GThluhRZ">overlapping</field><value name="VALUE"><shadow type="math_number" id="fNz,arG[;94*b9^wqQ.N"><field name="NUM">0</field></shadow><block type="logic_boolean" id="mUxwOp@-yFx$/rxcF=97"><field name="BOOL">TRUE</field></block></value><next><block type="break_keyword" id="9=]f{di9o[@+ju@2~4K?"></block></next></block></next></block></statement></block></statement><next><block type="controls_if" id="2%@hTbs|}EX8sxxBk(h;"><value name="IF0"><shadow type="logic_boolean" id="DtR5NDp,{qYZX|^)UF{9"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="RJM/-.B*A{)I!hl_zT{O"><value name="BOOL"><shadow type="logic_boolean" id="oz]SM|o3ZY@3oLP{7veE"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="Sl2]G9c7KNC2N!ky+;Fc"><field name="VAR" id="WIKlDYF#$rg:GThluhRZ">overlapping</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="oqZ:SWH#~?^C|lu;C03L"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="npc_to_talk = null" numlines="1"></mutation></block></statement></block></next></block></statement></block><block type="gameupdate" id="/tI*4Swpaaen+7U20y%)" x="1757" y="20"><statement name="HANDLER"><block type="pxt_controls_for_of" id="r*(ulGe[*+3#00au{IQZ"><value name="VAR"><block type="variables_get_reporter" id="IY]4TRkDXPH){%o!GPNZ"><mutation duplicateondrag="true"></mutation><field name="VAR" id="fi!;mx5P:q@xo?hi:2}c">tree</field></block></value><value name="LIST"><block type="variables_get" id="/W?uQ=;ml+%8CA2xWMlP"><field name="VAR" id="M8cLz~fK@~{g~JUMy#Vq">trees</field></block></value><statement name="DO"><block type="controls_if" id="^%{!B%2,.(kr~anA,@dy"><value name="IF0"><shadow type="logic_boolean" id="yd,dgP9g_xZ0YC2Cb91U"><field name="BOOL">TRUE</field></shadow><block type="spriteoverlapswith" id="^lC4*sI3-nA2y(8^r3B_"><value name="sprite"><block type="variables_get" id="UQPn:xrr6?Sthq+:tsw#"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><value name="other"><block type="variables_get" id="DjVrB[v_i.ohY]T?R8Mq"><field name="VAR" id="fi!;mx5P:q@xo?hi:2}c">tree</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="SCW}n|itr*}jc+u$Gr($"><field name="VAR" id="~xGlV9n$5fP|.xRxjQfo">tree_to_chop</field><value name="VALUE"><shadow type="math_number" id=",/r4(Xr|3@;5[738x$1X"><field name="NUM">0</field></shadow><block type="variables_get" id="uM$$;k$|IFbW,NG~X3LZ"><field name="VAR" id="fi!;mx5P:q@xo?hi:2}c">tree</field></block></value><next><block type="variables_set" id="aG#1)(kJhu_j++vIH.f-"><field name="VAR" id="D{Mt.S1gQoU%#U[`N%qb">overlapping2</field><value name="VALUE"><shadow type="math_number" id="TY65g2PioP8he-$ieT)H"><field name="NUM">0</field></shadow><block type="logic_boolean" id="-J1@Z0)_UG7n8:hPW3,Q"><field name="BOOL">TRUE</field></block></value><next><block type="break_keyword" id="H-aJHd@l}1(2(pRxm08d"></block></next></block></next></block></statement></block></statement><next><block type="controls_if" id="/M)t,P`1apkX+yTSpih4"><value name="IF0"><shadow type="logic_boolean" id="O=SQ:pn#mPm[k[=OpuOL"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="]aq,I]fe]c[?*z3upgbO"><value name="BOOL"><shadow type="logic_boolean" id="exb|OI|w`:n]2yRD2.XG"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="]SzE?Mj7#68|`jC@BbT|"><field name="VAR" id="D{Mt.S1gQoU%#U[`N%qb">overlapping2</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="9?BcA-yGD#K[D+fH@Vr;"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="tree_to_chop = null" numlines="1"></mutation></block></statement></block></next></block></statement></block><block type="keyonevent" id="4nqDbPSk)DkzLN%e!XQ*" x="2402" y="20"><field name="button">controller.B</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="n;n@C=`Q3G.?H!1y3tgp"><value name="IF0"><shadow type="logic_boolean" id="i|PRr!W^7RoRucbP28WA"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="xvm,6O[lMSTw~i?RkWPB"><field name="VAR" id=";TirE1yq(Bwwwbf..QhT">npc_to_talk</field></block></value><statement name="DO0"><block type="function_call" id="g%[O1Qql#XK@$j.N/#m0"><mutation name="open_market_menu" functionid="AEF-9VRQlEu|0?j]R~2%"></mutation></block></statement></block></statement></block><block type="keyonevent" id="qD,E`CUZ{ZUl(OFH[gHH" x="2754" y="20"><field name="button">controller.down</field><field name="event">ControllerButtonEvent.Pressed</field><comment pinned="false" h="80" w="160">--- Movement and Animations ---</comment><statement name="HANDLER"><block type="run_image_animation" id="i=1YaCY3xZzmnukE)sh0"><value name="sprite"><block type="variables_get" id="nY!t$t#c~xK4GpkRviN@"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="hHRmdMj2ypsfSTuC?z1z"><field name="frames">assets.animation`nena-animation-down`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim1"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="l5Gg?35#KKKjN8nN/m$k"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="(D-Q4hPCc/XV/FwGA7sy"><field name="on">false</field></shadow></value></block></statement></block><block type="keyonevent" id="/~,g0/7Yd?gIGch*DEIk" x="3138" y="20"><field name="button">controller.right</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="run_image_animation" id="`=7tz?FGrY7gd@-:MN%_"><value name="sprite"><block type="variables_get" id="bD_cT%Gy,`j5Z`[q-=8r"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="#UEZB.(+udssRBgBr=Q="><field name="frames">assets.animation`nena-animation-right`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim4"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id=".u]hUlKSGjXrUI!Ii!3n"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="{NlZ(Y?XFbOw/ZX]hNv."><field name="on">false</field></shadow></value></block></statement></block><block type="keyonevent" id="kt=E~TLZK%VGV_X7wX-O" x="3515" y="20"><field name="button">controller.left</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="run_image_animation" id="S@Kdop+c^r;=d,Fl/pLe"><value name="sprite"><block type="variables_get" id="!t?TN=8S[02)qd[XZy8V"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="siKwe@,^BkQ9=S;1a+x:"><field name="frames">assets.animation`nena-animation-left`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim2"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="xKQz!fv{)orSKc]f$+,S"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="C`Dv^-~@1Q6SF{Pn;6dk"><field name="on">false</field></shadow></value></block></statement></block><block type="keyonevent" id="vg2JNvcB#Td4~fy=}-Rs" x="3910" y="20"><field name="button">controller.A</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="controls_if" id="[Bybf/m^HgqMAW=mwi#F"><value name="IF0"><shadow type="logic_boolean" id="7](3f^2SEfaR}3l~|M`!"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="lsXZ$m@e2G=dii,V24*l"><field name="VAR" id="~xGlV9n$5fP|.xRxjQfo">tree_to_chop</field></block></value><statement name="DO0"><block type="function_call" id="%c76qvO8Tk[]kFJHpi3Q"><mutation name="chop_tree" functionid=")r[,SUDOu5B3=_5}c[1R"><arg name="tree" id="byqx2qpm8avkgud07wvlf" type="Sprite"></arg></mutation><value name="byqx2qpm8avkgud07wvlf"><block type="variables_get" id="8Z!4]Rg_^JBl)t=(#o8M"><field name="VAR" id="~xGlV9n$5fP|.xRxjQfo">tree_to_chop</field></block></value></block></statement></block></statement></block><block type="keyonevent" id="b3hAtLC*xnfg0Sc-3_pA" x="20" y="949"><field name="button">controller.up</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="run_image_animation" id="VeDM{q3YFDU3By_2Tn_6"><value name="sprite"><block type="variables_get" id="4k]oy.H3^N@ES9)hs:eX"><field name="VAR" id="!s`7y1,WNjXbhAD0IwPj">nena</field></block></value><value name="frames"><shadow type="animation_editor" id="zCg?u[~24*`K(G=6(uT_"><field name="frames">assets.animation`nena-animation-up`</field><data>{"commentRefs":[],"fieldData":{"frames":"myAnimations.anim3"}}</data></shadow></value><value name="frameInterval"><shadow type="timePicker" id="_6rF?ZJp|:2i+6Q1lN42"><field name="ms">500</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="N*_C1j?c)x*^(+[2TO!N"><field name="on">false</field></shadow></value></block></statement></block><block type="function_definition" id="X-9SZ7~^2xK@h|,l7kU$" x="379" y="949"><mutation name="perform_exchange" functionid="?13Y5F]E|m_wFT6/uWnd"><arg name="product_name" id="n78ej93dqsiegnfg0v5i" type="string"></arg><arg name="wood_price" id="u2lrcy5v1k2bje1hzt1" type="number"></arg><arg name="is_animal" id="8f5vgq759ijowyl00qej" type="boolean"></arg></mutation><field name="function_name">perform_exchange</field><comment pinned="false" h="80" w="160">--- Exchange Logic Methods ---</comment><value name="n78ej93dqsiegnfg0v5i"><block type="argument_reporter_string" id="aMDa(_]2gtnN-Z%U|Y8u"><mutation duplicateondrag="true"></mutation><field name="VALUE">product_name</field></block></value><value name="u2lrcy5v1k2bje1hzt1"><block type="argument_reporter_number" id="u@^Y527_@mz6@h+6Plh="><mutation duplicateondrag="true"></mutation><field name="VALUE">wood_price</field></block></value><value name="8f5vgq759ijowyl00qej"><block type="argument_reporter_boolean" id="[41*^fqnHct,hpW[PN}l"><mutation duplicateondrag="true"></mutation><field name="VALUE">is_animal</field></block></value><statement name="STACK"><block type="variables_set" id="O=fHVfbq|4kYO3w6TCf|"><field name="VAR" id="_K,P?v.MZP$}dw.d_i:F">quantity</field><comment pinned="false" h="80" w="160">Handles the conversion logic, rounding, and error control.
Ask the user for the quantity (using numeric input for Arcade)</comment><value name="VALUE"><shadow type="math_number" id="6ToHM=hNP!-{?tz)j32D"><field name="NUM">0</field></shadow><block type="gameaskfornumber" id=")5Wr-:in}%nD+$NY`;q,"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="message"><shadow type="text" id=";oA}KrrfuK:|,5$2Zia9"><field name="TEXT"></field></shadow><block type="text_join" id="ECxPDLpm8QI?2unAGDn*"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="6O8gf~@F+0g`E[3G@SiM"><field name="TEXT">How many </field></shadow></value><value name="ADD1"><shadow type="text" id=",RW,hi/PtvBK(;+fNzoN"><field name="TEXT"></field></shadow><block type="argument_reporter_string" id="TI#MYgh6Vx?{l|D%QQT4"><field name="VALUE">product_name</field></block></value><value name="ADD2"><shadow type="text" id="3(p90IGCyBFiExJYUTRZ"><field name="TEXT"> units?</field></shadow></value></block></value><value name="answerLength"><shadow type="math_number_minmax" id=".`a+%PcMQB@{2Xw(YmlF"><mutation min="1" max="10" precision="0"></mutation><field name="SLIDER">3</field></shadow></value></block></value><next><block type="controls_if" id="b121hv3dq,i@hV;_jc[="><comment pinned="false" h="80" w="160">Error control: Negative numbers or zero</comment><value name="IF0"><shadow type="logic_boolean" id="D=6wZhJy7WI3=Cnio$f("><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=":3_T99tKTx$B..e@9!s^"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="/uDac43c*[ZXj1+t_zqD"><field name="NUM">0</field></shadow><block type="variables_get" id="iRcDwh_-GlU[Ik_83rh)"><field name="VAR" id="_K,P?v.MZP$}dw.d_i:F">quantity</field></block></value><value name="B"><shadow type="math_number" id="+UUTXx]Y@!lH:AQyD-2U"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="game_show_long_text" id="Qqov4lWu2V3=y9zvJ8b|"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="SGZJv{f(Ies|69F$G@MU"><field name="TEXT">Error: You must enter a positive amount!</field></shadow></value><next><block type="function_return" id="|7i[_jWexHBIOs{M?5,s"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></next></block></statement><next><block type="controls_if" id="7Uagu7_)ZS_p8iit3%Ro"><comment pinned="false" h="80" w="160">Error control: Animals must be whole (no decimals)</comment><value name="IF0"><shadow type="logic_boolean" id="frwFf1YYSy/eMEp]-[}7"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="!7%J99B)pWMTmA%6`,Ev"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="`;]g[EJaWYN~pnXgd7(^"><field name="BOOL">TRUE</field></shadow><block type="argument_reporter_boolean" id="#V#trfSSN`*yZK;z3-zK"><field name="VALUE">is_animal</field></block></value><value name="B"><shadow type="logic_boolean" id=",%/:!8|_.:VvH=+L!n92"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="48_n=wH:WKKEKGHD%0(J"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="DHRYFW.^mq{|ev6BK%R3"><field name="NUM">0</field></shadow><block type="math_modulo" id="GG+lfG3sU!fE/WaiImo3"><value name="DIVIDEND"><shadow type="math_number" id="ci..$dlh/l$6OHMm*IK!"><field name="NUM">0</field></shadow><block type="variables_get" id="fcMad$eco67+yK;DrzxV"><field name="VAR" id="_K,P?v.MZP$}dw.d_i:F">quantity</field></block></value><value name="DIVISOR"><shadow type="math_number" id="fa,{*05*=~.m/)iiXl{r"><field name="NUM">1</field></shadow></value></block></value><value name="B"><shadow type="math_number" id=":`kf%!qRauuS;3ywZZW2"><field name="NUM">0</field></shadow></value></block></value></block></value><statement name="DO0"><block type="game_show_long_text" id="sQ/`@5$(SLJu|`.*4Gx~"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="w306pDYkAz/en$Jmg2|M"><field name="TEXT">Error: Animals must be whole and alive!</field></shadow></value><next><block type="function_return" id="5jJr1vJrY:`=jl6+EC+9"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></next></block></statement><next><block type="typescript_statement" id="jlmAt9(*WgqaWL+ALT05"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let total_cost = Math.roundWithPrecision(quantity * wood_price, 2)" numlines="1" declaredvars="total_cost"></mutation><next><block type="controls_if" id="/)z_F=mBVZtd#:KbqroX"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="{W/A/(gJB]1_YGgK:HR3"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Lv(qW_;6OVabnz[]rbhd"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="z_n2;jA?)U={D=5{3hO("><field name="NUM">0</field></shadow><block type="variables_get" id="Z_5BqY2k]H%,ApnZ:a#b"><field name="VAR" id="3,qYMEk)X6zL8lA5r(zE">wood</field></block></value><value name="B"><shadow type="math_number" id="5A-0H[i#Ww^4;RS=let)"><field name="NUM">0</field></shadow><block type="variables_get" id="LI1pVJA6~^`2[|I,.(Im"><field name="VAR" id="/^9!RNJrVGqNv=vb*L7h">total_cost</field></block></value></block></value><statement name="DO0"><block type="variables_change" id="/!ZR:AfO;nHaUzUXLfn8"><field name="VAR" id="3,qYMEk)X6zL8lA5r(zE">wood</field><value name="VALUE"><shadow type="math_number" id="-zF},(HnE*b#)d9j]Akr"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="_o`l-51M3cr#1HUtqyr)"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="X/zrD^fbbs#4_D96pBQ`"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id=".29MqFXJk!{R{?74%U}7"><field name="NUM">0</field></shadow><block type="variables_get" id="Oum8:p^r6_;`oqx[C$Sf"><field name="VAR" id="/^9!RNJrVGqNv=vb*L7h">total_cost</field></block></value></block></value><next><block type="typescript_statement" id="Rn7/L;yL}BhIs5d`v)Ce"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="wood = Math.roundWithPrecision(wood, 2)" numlines="1"></mutation><next><block type="game_show_long_text" id="!Jv5GX:DpDVEdi3%lW4Q"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="k8HLvYzk.9H#P|(}ZH4l"><field name="TEXT"></field></shadow><block type="text_join" id="eB6uU3v:wpqw%rf:c^VY" inline="false"><mutation items="6"></mutation><value name="ADD0"><shadow type="text" id="V{f)nmJNbE!yk$QvP:iV"><field name="TEXT">Traded </field></shadow></value><value name="ADD1"><shadow type="text" id="p;i}Z60T,W}+=]F1HM7K"><field name="TEXT"></field></shadow><block type="text_join" id="S;Be7W,]$`xfe3bE{UYb"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="Wa@kDMMC_l|~`uX7~Nl/"><field name="TEXT"></field></shadow><block type="variables_get" id="jPeX4Gxb!G#oM;BL}3mv"><field name="VAR" id="/^9!RNJrVGqNv=vb*L7h">total_cost</field></block></value></block></value><value name="ADD2"><shadow type="text" id="qVk`gM;Vq2,Sx;-!DS7v"><field name="TEXT">kg of wood for </field></shadow></value><value name="ADD3"><shadow type="text" id="_ZB.*pUhPm~6i-d8wxyi"><field name="TEXT"></field></shadow><block type="text_join" id="oqpm]Z:GIS=H,|c+Oww@"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="1f3s8VGh[PKgcw1Ej%zL"><field name="TEXT"></field></shadow><block type="variables_get" id="apwFEJP^VU@i[~z{9EHi"><field name="VAR" id="_K,P?v.MZP$}dw.d_i:F">quantity</field></block></value></block></value><value name="ADD4"><shadow type="text" id="GIGGdf9OTi$s[_eUG,Y1"><field name="TEXT"> </field></shadow></value><value name="ADD5"><shadow type="text" id="T#j3J4E.%XpMp}JupV:?"><field name="TEXT"></field></shadow><block type="argument_reporter_string" id="x-?B]Z*aBznUC-UCV`f]"><field name="VALUE">product_name</field></block></value></block></value></block></next></block></next></block></statement><statement name="ELSE"><block type="game_show_long_text" id="hvc-`yGhyCxW)+`-.-e1"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="j#:Mi71?^JlW9rh_MUv2"><field name="TEXT"></field></shadow><block type="text_join" id="%%H~SFdbYn:Yw#*Y#X|L"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="A#{!JRv98:T6vqP$(d|("><field name="TEXT">Not enough wood! You need </field></shadow></value><value name="ADD1"><shadow type="text" id="NmVbWge8,`m_t}cUN]/="><field name="TEXT"></field></shadow><block type="text_join" id="~e56C0-P!huV[c^Y1R4]"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="Tece-(P,=hOFBrk7h*6Q"><field name="TEXT"></field></shadow><block type="variables_get" id="a|Px$s#f6Gts?HQzW|ZD"><field name="VAR" id="/^9!RNJrVGqNv=vb*L7h">total_cost</field></block></value></block></value><value name="ADD2"><shadow type="text" id="z.4^Si=$O~0x0?04$v$j"><field name="TEXT">kg</field></shadow></value></block></value></block></statement></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="a3x);-z:I:PMY%*[pV2u" x="1556" y="949"><mutation name="open_market_menu" functionid="AEF-9VRQlEu|0?j]R~2%"></mutation><field name="function_name">open_market_menu</field><statement name="STACK"><block type="game_show_long_text" id="?Ua_[)G~O1t|$0j//1We"><field name="layout">DialogLayout.Bottom</field><comment pinned="false" h="80" w="160">Displays the main market menu.</comment><value name="str"><shadow type="text" id="V`jNvzX^I4342u;jx-u5"><field name="TEXT">MARKET: 1.Chicken, 2.Potato, 3.Goat, 4.Egg, 5.Horse, 6.Exit</field></shadow></value><next><block type="variables_set" id="1nTf;%XL[S6sk?-1yq{x"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field><value name="VALUE"><shadow type="math_number" id="Oqs^4EbR(X3G~;u^jH%%"><field name="NUM">0</field></shadow><block type="gameaskforstring" id="4X2RNbxFGWW%HPpukK(S"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="message"><shadow type="text" id="E+6IY0dM/Co3Zf6p(;Sl"><field name="TEXT">Enter product number (1-6):</field></shadow></value><value name="answerLength"><shadow type="math_number_minmax" id="F2vvay}ym*|[:poL:-i+"><mutation min="1" max="24" precision="0"></mutation><field name="SLIDER">1</field></shadow></value></block></value><next><block type="controls_if" id="5UHZJqk.`}K:sA|E3zne"><mutation elseif="5"></mutation><value name="IF0"><shadow type="logic_boolean" id="3P#-+kr[wehz^4EeBidI"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="V-A|u:Hec=+{C~=My#l;"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="p_@#})Fs|6(0Vn,)ZR$0"><field name="NUM">0</field></shadow><block type="variables_get" id="X5Jj)_Z$_Eue5m|$mC~-"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field></block></value><value name="B"><shadow type="math_number" id="e.QjgrcNZKD1_s0/RSi/"><field name="NUM">0</field></shadow><block type="text" id="G6I=Lg.c962z%Xt8f{xN"><field name="TEXT">1</field></block></value></block></value><statement name="DO0"><block type="function_call" id="Kbfmrw^L,CIzzNX^Ml[%"><mutation name="perform_exchange" functionid="?13Y5F]E|m_wFT6/uWnd"><arg name="product_name" id="n78ej93dqsiegnfg0v5i" type="string"></arg><arg name="wood_price" id="u2lrcy5v1k2bje1hzt1" type="number"></arg><arg name="is_animal" id="8f5vgq759ijowyl00qej" type="boolean"></arg></mutation><value name="n78ej93dqsiegnfg0v5i"><shadow type="text" id="7DEQdJ|g=sb_IT/RXoRM"><field name="TEXT">Chickens</field></shadow></value><value name="u2lrcy5v1k2bje1hzt1"><shadow type="math_number" id="a7T6)O4*4L=)Ub~lQv_J"><field name="NUM">1</field></shadow><block type="variables_get" id="TXj9RamZjL_klu5RYX^8"><field name="VAR" id="(z16wR`.`J3_G1Bu6B@s">WOOD_PER_CHICKEN</field></block></value><value name="8f5vgq759ijowyl00qej"><shadow type="logic_boolean" id="vRWa^V8}#2;H5Nm=d2Q="><field name="BOOL">TRUE</field></shadow></value></block></statement><value name="IF1"><shadow type="logic_boolean" id="1zT`1XkWEr@*P}t=Vb+`"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=".O%2PqFVNS7~g.U=Euex"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="ZxF{sW5uNu8:`qEXbn?:"><field name="NUM">0</field></shadow><block type="variables_get" id="w=.adrmI%?zjs9b^8%k#"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field></block></value><value name="B"><shadow type="math_number" id="vT!O46dm50=V-29CNP5k"><field name="NUM">0</field></shadow><block type="text" id=":Vs/Uvim5^VnCq8uM/=("><field name="TEXT">2</field></block></value></block></value><statement name="DO1"><block type="function_call" id="V9Ps+uCEFGOTKR=J_ZjB"><mutation name="perform_exchange" functionid="?13Y5F]E|m_wFT6/uWnd"><arg name="product_name" id="n78ej93dqsiegnfg0v5i" type="string"></arg><arg name="wood_price" id="u2lrcy5v1k2bje1hzt1" type="number"></arg><arg name="is_animal" id="8f5vgq759ijowyl00qej" type="boolean"></arg></mutation><value name="n78ej93dqsiegnfg0v5i"><shadow type="text" id="6LbiTrfvX9CaIZK+#$EI"><field name="TEXT">kg of Potatoes</field></shadow></value><value name="u2lrcy5v1k2bje1hzt1"><shadow type="math_number" id="o}(+s1m|G6gxp6qmNiy3"><field name="NUM">1</field></shadow><block type="variables_get" id="#Mt?Br:At{P6%D$vbt^G"><field name="VAR" id="F50cC0*lD8s@w,JFgCq_">WOOD_PER_KG_POTATO</field></block></value><value name="8f5vgq759ijowyl00qej"><shadow type="logic_boolean" id="r4eS4KAX.Wy2FbzlOmgq"><field name="BOOL">FALSE</field></shadow></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="DOo(G3n/t/*a,WW@6xTB"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="yomX%g[}u^~k(0leysrM"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="+cU1@4-sZSVF,4..kcJE"><field name="NUM">0</field></shadow><block type="variables_get" id="`lCg4~ZDVOWoy=)-*K#X"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field></block></value><value name="B"><shadow type="math_number" id="5@torRfe/oNxdA[IS^td"><field name="NUM">0</field></shadow><block type="text" id="3ntRN[*X,V^Ssvmq.Q6P"><field name="TEXT">3</field></block></value></block></value><statement name="DO2"><block type="function_call" id="BK8*.zB|A0qbrnIE5~M;"><mutation name="perform_exchange" functionid="?13Y5F]E|m_wFT6/uWnd"><arg name="product_name" id="n78ej93dqsiegnfg0v5i" type="string"></arg><arg name="wood_price" id="u2lrcy5v1k2bje1hzt1" type="number"></arg><arg name="is_animal" id="8f5vgq759ijowyl00qej" type="boolean"></arg></mutation><value name="n78ej93dqsiegnfg0v5i"><shadow type="text" id="KKr3bzOO)NrLN.*j0=Qa"><field name="TEXT">Goats</field></shadow></value><value name="u2lrcy5v1k2bje1hzt1"><shadow type="math_number" id="1K6QO7#{2tFI8mkD2zRU"><field name="NUM">1</field></shadow><block type="variables_get" id=",tA:}qrfW(P5mQ|uj+_v"><field name="VAR" id="LwW8W/U]+A)*#.oC)I@C">WOOD_PER_GOAT</field></block></value><value name="8f5vgq759ijowyl00qej"><shadow type="logic_boolean" id="(P!8$EegwUYq-;R2}vk2"><field name="BOOL">TRUE</field></shadow></value></block></statement><value name="IF3"><shadow type="logic_boolean" id="c:OdCH+up6FFzxVU(-c}"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="rYsf3)Bwgw67+dSRyPB2"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="bq,ZJy/ec$yyoU?AbIGW"><field name="NUM">0</field></shadow><block type="variables_get" id="[5B6}O=t5G?lniQohy_1"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field></block></value><value name="B"><shadow type="math_number" id="l9F$C9:g6yWTICht%*jP"><field name="NUM">0</field></shadow><block type="text" id="aL5Y#3sAV@T}Tc!b(,n6"><field name="TEXT">4</field></block></value></block></value><statement name="DO3"><block type="function_call" id="Z_TjdYXU!LXYZOtXs)_c"><mutation name="perform_exchange" functionid="?13Y5F]E|m_wFT6/uWnd"><arg name="product_name" id="n78ej93dqsiegnfg0v5i" type="string"></arg><arg name="wood_price" id="u2lrcy5v1k2bje1hzt1" type="number"></arg><arg name="is_animal" id="8f5vgq759ijowyl00qej" type="boolean"></arg></mutation><value name="n78ej93dqsiegnfg0v5i"><shadow type="text" id="4oF;y64J2^,@To{H}Bd~"><field name="TEXT">Eggs</field></shadow></value><value name="u2lrcy5v1k2bje1hzt1"><shadow type="math_number" id="_b]`fyXir,j%6Vm}V2^K"><field name="NUM">1</field></shadow><block type="variables_get" id="w5pWw[.`#Goh$LP2t(VR"><field name="VAR" id=",TQ^LvoNwq|1YNlnUQ[0">WOOD_PER_EGG</field></block></value><value name="8f5vgq759ijowyl00qej"><shadow type="logic_boolean" id=";}C(JD+J%x_!dmrsK:-E"><field name="BOOL">FALSE</field></shadow></value></block></statement><value name="IF4"><shadow type="logic_boolean" id="GW_d4W{gJIAz,l/$=5LE"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=",cuwc30!SEh*Zc3gD(xI"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="`V{=gQUgVza,EG]{|g7_"><field name="NUM">0</field></shadow><block type="variables_get" id="]~($6T.]vZCdWkmQ4ux|"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field></block></value><value name="B"><shadow type="math_number" id="-cLf-rxpNWC0,~L,0G+T"><field name="NUM">0</field></shadow><block type="text" id="9Q#z`bgX;(XkhCp[kw(`"><field name="TEXT">5</field></block></value></block></value><statement name="DO4"><block type="function_call" id="RN8^o]/R-J$qL7qH]Cvt"><mutation name="perform_exchange" functionid="?13Y5F]E|m_wFT6/uWnd"><arg name="product_name" id="n78ej93dqsiegnfg0v5i" type="string"></arg><arg name="wood_price" id="u2lrcy5v1k2bje1hzt1" type="number"></arg><arg name="is_animal" id="8f5vgq759ijowyl00qej" type="boolean"></arg></mutation><value name="n78ej93dqsiegnfg0v5i"><shadow type="text" id="uiU6Q(54]:CVR,5@yzjn"><field name="TEXT">Horses</field></shadow></value><value name="u2lrcy5v1k2bje1hzt1"><shadow type="math_number" id="yba1WC?UkHe@QNozsp=@"><field name="NUM">1</field></shadow><block type="variables_get" id="~j,3+O#(/h(}e%NV*e:L"><field name="VAR" id="u?D.C0bAz||BnxIr-xdF">WOOD_PER_HORSE</field></block></value><value name="8f5vgq759ijowyl00qej"><shadow type="logic_boolean" id="C(_9qO-;^;e9CT+@0emU"><field name="BOOL">TRUE</field></shadow></value></block></statement><value name="IF5"><shadow type="logic_boolean" id="g0faDF+*4rUw~M_i1|H3"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="eyHIC^K@DRwCuv5W|?~3"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="Y6JcCShR`D@(OEN/-4yT"><field name="NUM">0</field></shadow><block type="variables_get" id="M8__6@(QY(cOvXl(Er[L"><field name="VAR" id="I+,l_a#^-*JlAI5,$K4*">selection</field></block></value><value name="B"><shadow type="math_number" id="Gt?Zk;9]q#IC0%%s|3r["><field name="NUM">0</field></shadow><block type="text" id="e_S]9h5(|HM(5ig$OPj?"><field name="TEXT">6</field></block></value></block></value><statement name="DO5"><block type="game_show_long_text" id="rhz1::%|b,G3,R[y`Rw$"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="e-l$Q:C*wgBRz5uALdW("><field name="TEXT">See you next time!</field></shadow></value></block></statement></block></next></block></next></block></statement></block><block type="function_definition" id=".K,F+*4R.v]Vx[L!z])x" x="2499" y="949"><mutation name="spawn_npcs" functionid="s=}$6W/0y=nRxM`hP%2t"></mutation><field name="function_name">spawn_npcs</field><comment pinned="false" h="80" w="160">--- NPC and Interaction Methods ---</comment><statement name="STACK"><block type="typescript_statement" id="-|JfnqI{T[pz}_.O;c=x"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let npc: Sprite;" numlines="1" declaredvars="npc"></mutation><next><block type="variables_set" id=")yj[ptM*m|pGyJ28RPV*"><field name="VAR" id="g!VG34)QdV+rh^d^KZts">positions</field><value name="VALUE"><shadow type="math_number" id="NnbBoVUu0BLG0h4(UVk7"><field name="NUM">0</field></shadow><block type="lists_create_with" id="w}D!ec!pBus#ZL@Vr|vL" inline="false"><mutation items="4" horizontalafter="3"></mutation><value name="ADD0"><block type="lists_create_with" id="Q:?F|Mt~$+hv8VhASj.a"><mutation items="2" horizontalafter="3"></mutation><value name="ADD0"><shadow type="math_number" id="x9WG!~yDRYycY8rrIxg^"><field name="NUM">72</field></shadow></value><value name="ADD1"><shadow type="math_number" id="83?QBg5`D8R[-xQ~7uKr"><field name="NUM">232</field></shadow></value></block></value><value name="ADD1"><block type="lists_create_with" id="u+dK*:J@hD@m.If$z`X0"><mutation items="2" horizontalafter="3"></mutation><value name="ADD0"><shadow type="math_number" id="i`[va:Uk|ty2[W#YHts3"><field name="NUM">432</field></shadow></value><value name="ADD1"><shadow type="math_number" id="re^:AV^Z%I{PbpP8yeqj"><field name="NUM">232</field></shadow></value></block></value><value name="ADD2"><block type="lists_create_with" id=")xQgH)/q{)q]Y:G:%q)z"><mutation items="2" horizontalafter="3"></mutation><value name="ADD0"><shadow type="math_number" id="JZ.OFg1m^x9z(Ike^B7,"><field name="NUM">72</field></shadow></value><value name="ADD1"><shadow type="math_number" id="~!M~o%z/T[q}.h?Gx3-+"><field name="NUM">432</field></shadow></value></block></value><value name="ADD3"><block type="lists_create_with" id="W,Qk^S)vJY_$}QI:O4:S"><mutation items="2" horizontalafter="3"></mutation><value name="ADD0"><shadow type="math_number" id="bwcMus*?:23@OPAqRR{C"><field name="NUM">432</field></shadow></value><value name="ADD1"><shadow type="math_number" id="C@anJC31O]ct#Q7;#*tN"><field name="NUM">432</field></shadow></value></block></value></block></value><next><block type="pxt_controls_for_of" id="b!drwEm^t8khgtDA1!n$"><value name="VAR"><block type="variables_get_reporter" id="-!D]l:A1Gsd9v@/,DP,1"><mutation duplicateondrag="true"></mutation><field name="VAR" id="F+I{2q^ft](rRO*OBXT4">pos</field></block></value><value name="LIST"><block type="variables_get" id="Vkm2GC)Y=}xuTy/yv=JD"><field name="VAR" id="g!VG34)QdV+rh^d^KZts">positions</field></block></value><statement name="DO"><block type="variables_set" id="L7FWZUw/cbz+EU=k|X{:"><field name="VAR" id="yE2jlYV0RYO|Z{0osZ`*">npc</field><value name="VALUE"><shadow type="math_number" id="=8.g1kHTE!yjnmXGh_(,"><field name="NUM">0</field></shadow><block type="spritescreate" id="tCazEg-7`5LU|/IUqhfs"><value name="img"><shadow type="screen_image_picker" id="@6-P8E]WPNliK39Zy#go"><field name="img">assets.image`npc-front`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image4"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="0O_#erJK.g6Lq:lwD*SX"><field name="MEMBER">Player</field></shadow><block type="variables_get" id="5x/SL0p$*dVQWX{qgNJo"><field name="VAR" id="yE2jlYV0RYO|Z{0osZ`*">npc</field></block></value></block></value><next><block type="spritesetpos" id="RQ(Mr_flSX:l3vggW2Mp"><value name="sprite"><block type="variables_get" id=";Hfmx?V9J6^:4rj`t)]%"><field name="VAR" id="yE2jlYV0RYO|Z{0osZ`*">npc</field></block></value><value name="x"><shadow type="positionPicker" id="RS#n]!*)d*{R8ULP|_0U"><field name="index">0</field></shadow><block type="lists_index_get" id="*d{*ll(P=R0j,Mfzwpf?"><value name="LIST"><block type="variables_get" id="#-t8~?=Bh_lnz6x`V/t`"><field name="VAR" id="F+I{2q^ft](rRO*OBXT4">pos</field></block></value><value name="INDEX"><shadow type="math_number" id="VT7F-dAsKFMYD+k-60$|"><field name="NUM">0</field></shadow></value></block></value><value name="y"><shadow type="positionPicker" id="p|+@Bc-Yj{U;TwNfs~KS"><field name="index">0</field></shadow><block type="lists_index_get" id="_hv!3e;zLc_Sa9S*wyq$"><value name="LIST"><block type="variables_get" id="+oNJi45kpG[[qsB+Oy;E"><field name="VAR" id="F+I{2q^ft](rRO*OBXT4">pos</field></block></value><value name="INDEX"><shadow type="math_number" id="rlgV?/cwMqFQw=YKH^]O"><field name="NUM">1</field></shadow></value></block></value><next><block type="array_push" id="T%.Z|7Lt3R(VT8Rg[OIt"><value name="list"><block type="variables_get" id="EgT.8PC+BdPQN,HSLBlE"><field name="VAR" id=")8-fb%ERU_cE(jo~6LMr">npcs</field></block></value><value name="value"><block type="variables_get" id="rcLbeFDlJBaC+5qI:b}z"><field name="VAR" id="yE2jlYV0RYO|Z{0osZ`*">npc</field></block></value></block></next></block></next></block></statement></block></next></block></next></block></statement></block><block type="function_definition" id="J*U]VqJN2[xC_l7Pz%9L" x="3534" y="949"><mutation name="remove_tree_from_list" functionid="`p7z{!EvWmL)HT#0tWHj"><arg name="tree2" id="lsv2hchy5ap7peoa5y7f3v" type="Sprite"></arg></mutation><field name="function_name">remove_tree_from_list</field><value name="lsv2hchy5ap7peoa5y7f3v"><block type="argument_reporter_custom" id="r6_i2kPMa8=t-q0Y?xRJ"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">tree2</field></block></value><statement name="STACK"><block type="device_while" id="c~`4u_uRoiqRabGZc2_3"><value name="COND"><shadow type="logic_boolean" id="N*G]wo5QJRzqmrM%pd|f"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="8R3]L_(GlhopC(.#JWvD"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="-.e(fP=AH(4^@5h!;X-D"><field name="NUM">0</field></shadow><block type="variables_get" id="m)~~gia23.d~j`pD$?@|"><field name="VAR" id="%eRJ!HcZr[dBC.9FX)lM">i</field></block></value><value name="B"><shadow type="math_number" id="d=h)_bMd1Pd=!ubTk?!("><field name="NUM">0</field></shadow><block type="math_arithmetic" id=":bNWqq$ZzE`8Mm4[^a=M"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="j/*wdk-^3~DnjEhu!s(w"><field name="NUM">0</field></shadow><block type="lists_length" id="vUs7ONpw:!niycwY@q/6"><value name="VALUE"><block type="variables_get" id=",q=m(mdZKT=f.r.S)P`7"><field name="VAR" id="M8cLz~fK@~{g~JUMy#Vq">trees</field></block></value></block></value><value name="B"><shadow type="math_number" id="$Zgqr*M=#dx}Sw!i+j?9"><field name="NUM">1</field></shadow></value></block></value></block></value><statement name="DO"><block type="controls_if" id="YIR;_ZwNtPs!=Yn2itht"><value name="IF0"><shadow type="logic_boolean" id="Xzh.^J-o[e]iVcg5+1s("><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ygpd,DVS[G;DtWIXlW6`"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="nfrEka,I;Jyy]3=9Y9N9"><field name="NUM">0</field></shadow><block type="lists_index_get" id="DBn5N^bxaco4VE8u;Oz["><value name="LIST"><block type="variables_get" id="DnwD.Jt=Bus/f*LfAlKN"><field name="VAR" id="M8cLz~fK@~{g~JUMy#Vq">trees</field></block></value><value name="INDEX"><shadow type="math_number" id="(UWa9.jaP0-QnE~iV.Cf"><field name="NUM">0</field></shadow><block type="variables_get" id=";4WE_nH^-eaf3A~yU^/n"><field name="VAR" id="%eRJ!HcZr[dBC.9FX)lM">i</field></block></value></block></value><value name="B"><shadow type="math_number" id="PG+iF@[KXizXjz`ynNBA"><field name="NUM">0</field></shadow><block type="argument_reporter_custom" id="OO;~SW36}3`R%K~$c_?G"><mutation typename="Sprite"></mutation><field name="VALUE">tree2</field></block></value></block></value><statement name="DO0"><block type="array_removeat_statement" id="In+/Tjrh6UUeLdN3RA%K"><value name="list"><block type="variables_get" id="L66kxs~Tc$649cFdg!HI"><field name="VAR" id="M8cLz~fK@~{g~JUMy#Vq">trees</field></block></value><value name="index"><block type="variables_get" id="(fXgsi_(R^dXjLl~?[Qd"><field name="VAR" id="%eRJ!HcZr[dBC.9FX)lM">i</field></block></value><next><block type="function_return" id=")6R;D{10xEte(a=J9q+_"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></next></block></statement><next><block type="variables_change" id="$N0R@%0bQ9rT#|t^]DuS"><field name="VAR" id="%eRJ!HcZr[dBC.9FX)lM">i</field><value name="VALUE"><shadow type="math_number" id="JtG63#UnIZ8x$~t:AkFh"><field name="NUM">1</field></shadow></value></block></next></block></statement></block></statement></block><block type="function_definition" id="a}$3?q=l?45#KdI*HT-]" x="20" y="2272"><mutation name="spawn_tree" functionid=".Yu29UdeL2%:gX~|jKt,"></mutation><field name="function_name">spawn_tree</field><comment pinned="false" h="80" w="160">--- Tree and Wood Methods (Original logic preserved) ---</comment><statement name="STACK"><block type="controls_if" id="RjGlLe{,!%A@9HH14WdW"><value name="IF0"><shadow type="logic_boolean" id="Y*H`DAO.4XHj+L7VJ`RC"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Ub~.RL6/KRx^d_f0!=KG"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="KhExq6@g$MZZ9aO2^`bG"><field name="NUM">0</field></shadow><block type="lists_length" id="bw,BAKp[v50ulZqOw!cl"><value name="VALUE"><block type="variables_get" id="D[f]-xR3ZK)gmD,E4g$J"><field name="VAR" id="M8cLz~fK@~{g~JUMy#Vq">trees</field></block></value></block></value><value name="B"><shadow type="math_number" id="{h`y70g+kW[blGSdJUEE"><field name="NUM">0</field></shadow><block type="variables_get" id="`8Tt+;SBM(pmKSHaZ.]F"><field name="VAR" id="q#nl;93Oun:.@Y-41:}1">MAX_TREES</field></block></value></block></value><statement name="DO0"><block type="function_return" id="~nd],0CO2y[(F;9A{@=e"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="true"></mutation></block></statement><next><block type="variables_set" id="5LiVyGo2;Wh]DTL4z,i#"><field name="VAR" id="VSnw]:]kbhf-(yG6M^=Q">tree3</field><value name="VALUE"><shadow type="math_number" id="]`aOLk?nk/xt3S7h)4^v"><field name="NUM">0</field></shadow><block type="spritescreate" id="-E0?Msz70O-OC-Q0{P$@"><value name="img"><shadow type="screen_image_picker" id="}12u9gW]c1T5K^)WombU"><field name="img">assets.image`tree`</field><data>{"commentRefs":[],"fieldData":{"img":"myImages.image3"}}</data></shadow></value><value name="kind"><shadow type="spritekind" id="UECncnt4O4ycF*P0o^:h"><field name="MEMBER">Food</field></shadow></value></block></value><next><block type="variables_set" id="{a[91O_kHY1H#FlaSN*%"><field name="VAR" id="@tw4.L:mvk:s$MLUjt6.">x2</field><value name="VALUE"><shadow type="math_number" id="Kw~~c_]ibX=ESsUI^hf]"><field name="NUM">0</field></shadow><block type="device_random" id="9T!`5^=andq8VT]9{Q=C"><value name="min"><shadow type="math_number" id="s1h77@V?e$+$F`jfR]h;"><field name="NUM">16</field></shadow></value><value name="limit"><block type="math_arithmetic" id="#o)O^3]!tbnAh;}}9^@b"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="0j}Zzf]zv_}nV)kv~wxT"><field name="NUM">0</field></shadow><block type="scenescreenwidth" id="tE$dzo$Gk!3GqEXk+JZ1"></block></value><value name="B"><shadow type="math_number" id=".R1eC03`xd#}1e357-~F"><field name="NUM">16</field></shadow></value></block></value></block></value><next><block type="variables_set" id="#@5Z}gU-JU^zJoI}ZG3V"><field name="VAR" id="J?6YEozg}:DZxus]47;0">y2</field><value name="VALUE"><shadow type="math_number" id="w{@$.HXWV)vAb{~@rkcw"><field name="NUM">0</field></shadow><block type="device_random" id="WST7R/%ptZwn]+chQ+ia"><value name="min"><shadow type="math_number" id="i;6K_SHG$}cF7M;T57OP"><field name="NUM">16</field></shadow></value><value name="limit"><block type="math_arithmetic" id="v-I:,.M2nCJtQt1R[hM."><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="fFRu)cr@6ep58NN1$SNE"><field name="NUM">0</field></shadow><block type="scenescreenheight" id="=fUd]p`*4A_z#@`woyB7"></block></value><value name="B"><shadow type="math_number" id="{-VI%%ANt$d#4(tsUO[2"><field name="NUM">16</field></shadow></value></block></value></block></value><next><block type="spritesetpos" id="}jZ*V{+bKa!yXH7lua.;"><value name="sprite"><block type="variables_get" id="xtirpM%Y4x=LhGi(un|_"><field name="VAR" id="VSnw]:]kbhf-(yG6M^=Q">tree3</field></block></value><value name="x"><shadow type="positionPicker" id="N0JHUP7kJMV!6#MI]2C0"><field name="index">0</field></shadow><block type="variables_get" id="ov{g}K+Q138WHuL#t^K~"><field name="VAR" id="@tw4.L:mvk:s$MLUjt6.">x2</field></block></value><value name="y"><shadow type="positionPicker" id="UH[9wQ0xD*NCRY!%ZZXS"><field name="index">0</field></shadow><block type="variables_get" id="g]wO_^]f1^DEuXt{*Plt"><field name="VAR" id="J?6YEozg}:DZxus]47;0">y2</field></block></value><next><block type="array_push" id="hFZV~T^ic|CjG=)~75zb"><value name="list"><block type="variables_get" id=";@w-Y=2KB*Xdaf9Xf`}^"><field name="VAR" id="M8cLz~fK@~{g~JUMy#Vq">trees</field></block></value><value name="value"><block type="variables_get" id=";(TA1([hw!|CEK22zl-O"><field name="VAR" id="VSnw]:]kbhf-(yG6M^=Q">tree3</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="-$i-}kW|%]Nnv:+)|[nB" x="778" y="2272"><mutation name="chop_tree" functionid=")r[,SUDOu5B3=_5}c[1R"><arg name="tree" id="byqx2qpm8avkgud07wvlf" type="Sprite"></arg></mutation><field name="function_name">chop_tree</field><value name="byqx2qpm8avkgud07wvlf"><block type="argument_reporter_custom" id="4CLbl7:N6M1k-6q{|{F%"><mutation duplicateondrag="true" typename="Sprite"></mutation><field name="VALUE">tree</field></block></value><statement name="STACK"><block type="variables_change" id="m^=YT)7Qpy=je.ZQC0J["><field name="VAR" id="3,qYMEk)X6zL8lA5r(zE">wood</field><value name="VALUE"><shadow type="math_number" id="e.)DIc3dlk`:8Y?NvOey"><field name="NUM">2</field></shadow></value><next><block type="function_call" id="axN$t_b]jZK$MOV$t?Bi"><mutation name="remove_tree_from_list" functionid="`p7z{!EvWmL)HT#0tWHj"><arg name="tree2" id="lsv2hchy5ap7peoa5y7f3v" type="Sprite"></arg></mutation><value name="lsv2hchy5ap7peoa5y7f3v"><block type="argument_reporter_custom" id="sgYj]E8eJ}?z-?L,,Qq_"><mutation typename="Sprite"></mutation><field name="VALUE">tree</field></block></value><next><block type="spritedestroy" id="9x^}ay`_8EetZTEf?0eW"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="effect">effects.spray</field><value name="sprite"><block type="argument_reporter_custom" id="hFb6?lD5`X!!n`+Z7C-y"><mutation typename="Sprite"></mutation><field name="VALUE">tree</field></block></value><next><block type="game_show_long_text" id="UaikHH0rF2A1]$fjy1Z0"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="3WtYQlxy9_dDV[.~.-8J"><field name="TEXT"></field></shadow><block type="text_join" id="b5`tLflB6wQRg})%.A{S"><mutation items="3"></mutation><value name="ADD0"><shadow type="text" id="+[rOP{$6h3ONaq2@srsG"><field name="TEXT">You got 2kg of wood. Total: </field></shadow></value><value name="ADD1"><shadow type="text" id="H2O0g|hd/M_oy.w)pIP6"><field name="TEXT"></field></shadow><block type="text_join" id="%NCsB;*~b^03u{4bT5sm"><mutation items="1"></mutation><value name="ADD0"><shadow type="text" id="XQ[O5_q2[Z$+8vAOIZxE"><field name="TEXT"></field></shadow><block type="variables_get" id="*=0Lvsq;B*;/uuHco8`?"><field name="VAR" id="3,qYMEk)X6zL8lA5r(zE">wood</field></block></value></block></value><value name="ADD2"><shadow type="text" id="-U-YWA=M|1.pqYzQ*vI@"><field name="TEXT">kg</field></shadow></value></block></value></block></next></block></next></block></next></block></statement></block></xml>